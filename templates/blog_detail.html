{% extends 'base.html' %}
{% block content %}

<h2>{{ journey.title }}</h2>
<p class="text-muted">{{ journey.location }}</p>

{% if journey.is_private %}
  <span class="badge bg-danger mb-2">ğŸ”’ Private</span>
{% endif %}

<div class="row g-2 mb-4">
  {% for img in journey.images.all %}
    <div class="col-12 col-sm-6 col-md-4">
      <img
        src="{{ img.image.url }}"
        class="img-fluid rounded shadow-1"
        style="width:100%; height:220px; object-fit:cover;"
      >
    </div>
  {% endfor %}
</div>

<p>{{ journey.description }}</p>

<div class="mb-3">
  <a href="{% url 'like' journey.id %}" class="btn btn-danger btn-sm">
    â¤ï¸ {{ journey.likes.count }}
  </a>

  {% if user == journey.author %}
    <a href="{% url 'edit_journey' journey.id %}" class="btn btn-warning btn-sm">Edit</a>
    <a href="{% url 'delete_journey' journey.id %}" class="btn btn-outline-danger btn-sm">Delete</a>
  {% endif %}
</div>

<hr>

<h5>Comments</h5>

{% for c in journey.comments.all %}
  <p><strong>{{ c.user }}</strong>: {{ c.text }}</p>
{% empty %}
  <p class="text-muted">No comments yet.</p>
{% endfor %}

{% if user.is_authenticated %}
<form method="POST">
  {% csrf_token %}
  <textarea class="form-control mb-2" name="comment" placeholder="Write a comment..."></textarea>
  <button class="btn btn-primary btn-sm">Comment</button>
</form>
{% endif %}

{% endblock %}
